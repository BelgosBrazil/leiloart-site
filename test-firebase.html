<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Firebase - Interactive Banners</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .log {
            background: #f5f5f5;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-family: monospace;
        }
        .error { background: #ffebee; color: #c62828; }
        .success { background: #e8f5e8; color: #2e7d32; }
        .warning { background: #fff3e0; color: #ef6c00; }
    </style>
</head>
<body>
    <h1>Teste Firebase - Cole√ß√£o interactiveBanners</h1>
    <div id="logs"></div>
    
    <script type="module">
        // Import Firebase
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, getDocs } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const logsDiv = document.getElementById('logs');
        
        function addLog(message, type = 'log') {
            const logElement = document.createElement('div');
            logElement.className = `log ${type}`;
            logElement.textContent = new Date().toLocaleTimeString() + ' - ' + message;
            logsDiv.appendChild(logElement);
            console.log(message);
        }

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCgYULlRdEDRhxksVWB7yYUXSEeD8O98u4",
            authDomain: "leiloart.firebaseapp.com",
            projectId: "leiloart",
            storageBucket: "leiloart.firebasestorage.app",
            messagingSenderId: "807514943827",
            appId: "1:807514943827:web:646b3e0a3851d3b075b1a6",
            measurementId: "G-HMV38FP036"
        };

        try {
            addLog('üöÄ Inicializando Firebase...', 'log');
            
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
            
            addLog('‚úÖ Firebase inicializado com sucesso', 'success');
            
            // Test connection to interactiveBanners collection
            addLog('üîç Testando conex√£o com cole√ß√£o interactiveBanners...', 'log');
            
            const bannersRef = collection(db, 'interactiveBanners');
            const snapshot = await getDocs(bannersRef);
            
            addLog(`üìä Cole√ß√£o acessada. Total de documentos: ${snapshot.size}`, snapshot.size > 0 ? 'success' : 'warning');
            
            if (snapshot.size === 0) {
                addLog('‚ö†Ô∏è A cole√ß√£o interactiveBanners est√° vazia. Voc√™ precisa adicionar dados no Firestore.', 'warning');
                addLog('üí° Estrutura esperada para cada documento:', 'log');
                addLog('{ id: string, title: string, imageUrl: string, aspectRatio: number, focalPoint: {x: number, y: number}, active: boolean, hotspots: [...] }', 'log');
            } else {
                addLog('üìã Documentos encontrados:', 'success');
                
                snapshot.forEach((doc) => {
                    const data = doc.data();
                    addLog(`üìÑ ID: ${doc.id}`, 'log');
                    addLog(`   T√≠tulo: ${data.title || 'N/A'}`, 'log');
                    addLog(`   Ativo: ${data.active !== undefined ? data.active : 'N/A'}`, 'log');
                    addLog(`   URL da imagem: ${data.imageUrl || 'N/A'}`, 'log');
                    addLog(`   Hotspots: ${data.hotspots ? data.hotspots.length : 0}`, 'log');
                    addLog('---', 'log');
                });
            }
            
        } catch (error) {
            addLog(`‚ùå Erro: ${error.message}`, 'error');
            console.error('Erro completo:', error);
        }
    </script>
</body>
</html>